<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Matrix Admin</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%23667eea;stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:%23764ba2;stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23grad)'/%3E%3Cpath d='M25 50 L40 65 L75 30' stroke='white' stroke-width='8' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">

    <!-- CSS -->
    <link href="/assets/libs/flot/css/float-chart.css" rel="stylesheet" />
    <link href="/dist/css/style.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body>
    <div class="preloader">
        <div class="lds-ripple">
            <div class="lds-pos"></div>
            <div class="lds-pos"></div>
        </div>
    </div>

    <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
        data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">

        <!-- Topbar header -->
        <header class="topbar" data-navbarbg="skin5">
            <nav class="navbar top-navbar navbar-expand-md navbar-dark">
                <div class="navbar-header" data-logobg="skin5">
                    <a class="navbar-brand" href="/">
                        <b class="logo-icon ps-2">
                            <img src="/assets/images/logo-icon.png" alt="homepage" class="light-logo" width="25" />
                        </b>
                        <span class="logo-text ms-2">
                            <img src="/assets/images/logo-text.png" alt="homepage" class="light-logo" />
                        </span>
                    </a>
                    <a class="nav-toggler waves-effect waves-light d-block d-md-none" href="javascript:void(0)">
                        <i class="ti-menu ti-close"></i>
                    </a>
                </div>

                <div class="navbar-collapse collapse" id="navbarSupportedContent" data-navbarbg="skin5">
                    <!-- Left nav items -->
                    <ul class="navbar-nav float-start me-auto">
                        <li class="nav-item d-none d-lg-block">
                            <a class="nav-link sidebartoggler waves-effect waves-light" href="javascript:void(0)"
                                data-sidebartype="mini-sidebar">
                                <i class="mdi mdi-menu font-24"></i>
                            </a>
                        </li>
                    </ul>

                    <!-- Right nav items -->
                    <ul class="navbar-nav float-end">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle text-muted waves-effect waves-dark pro-pic d-flex align-items-center"
                                href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                                aria-expanded="false">

                                <% if (user.image && !user.image.includes('default.png')) { %>
                                    <img src="/uploads/<%= user.image %>" alt="user" class="rounded-circle" width="31"
                                        height="31" style="object-fit:cover;" />
                                    <% } else { %>
                                        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                                            style="width:31px; height:31px; font-weight:bold;">
                                            <%= user.name.charAt(0).toUpperCase() %>
                                        </div>
                                        <% } %>

                                            <span class="ms-2 d-inline-block text-truncate" style="max-width: 120px;">
                                                <%= user.name %> (<%= user.role.charAt(0).toUpperCase() +
                                                        user.role.slice(1) %>)
                                            </span>
                            </a>


                            <ul class="dropdown-menu dropdown-menu-end user-dd animated"
                                aria-labelledby="navbarDropdown">
                                <li>
                                    <a class="dropdown-item" href="/<%= user.role %>/profile">
                                        <i class="mdi mdi-account me-1 ms-1"></i> My Profile
                                    </a>
                                </li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li>
                                    <a class="dropdown-item" href="/logout">
                                        <i class="fa fa-power-off me-1 ms-1"></i> Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <!-- Sidebar -->
        <aside class="left-sidebar" data-sidebarbg="skin5">
            <div class="scroll-sidebar">
                <nav class="sidebar-nav">
                    <ul id="sidebarnav" class="pt-4">
                        <li class="sidebar-item text-center mb-2">
                            <p class="text-white mb-0"><strong>
                                    <%= user.name %>
                                </strong> (<%= user.role %>)</p>
                        </li>

                        <!-- Dashboard -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" href="/<%= user.role %>">
                                <i class="mdi mdi-view-dashboard"></i>
                                <span class="hide-menu">Dashboard</span>
                            </a>
                        </li>

                        <!-- Employee Menu -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" data-bs-toggle="collapse"
                                href="#employeeMenu" role="button" aria-expanded="false" aria-controls="employeeMenu">
                                <i class="mdi mdi-clipboard-text"></i>
                                <span class="hide-menu">Employee</span>
                            </a>
                            <ul class="collapse list-unstyled ps-3" id="employeeMenu">
                                <li><a class="sidebar-link waves-effect waves-dark" href="/employee/my-tasks">My
                                        Tasks</a></li>
                            </ul>
                        </li>

                        <!-- Manager Menu -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" data-bs-toggle="collapse"
                                href="#managerMenu" role="button" aria-expanded="false" aria-controls="managerMenu">
                                <i class="mdi mdi-account-multiple"></i>
                                <span class="hide-menu">Manager</span>
                            </a>
                            <ul class="collapse list-unstyled ps-3" id="managerMenu">
                                <li><a class="sidebar-link waves-effect waves-dark" href="/manager/employees">Team</a>
                                </li>
                                <li><a class="sidebar-link waves-effect waves-dark" href="/manager/tasks">My Tasks</a>
                                </li>
                                <li><a class="sidebar-link waves-effect waves-dark" href="/manager/assign-task">Assign
                                        Tasks</a></li>
                            </ul>
                        </li>

                        <!-- Admin Menu -->
                        <li class="sidebar-item">
                            <a class="sidebar-link waves-effect waves-dark sidebar-link" data-bs-toggle="collapse"
                                href="#adminMenu" role="button" aria-expanded="false" aria-controls="adminMenu">
                                <i class="mdi mdi-account-multiple"></i>
                                <span class="hide-menu">Admin</span>
                            </a>
                            <ul class="collapse list-unstyled ps-3" id="adminMenu">
                                <li><a class="sidebar-link waves-effect waves-dark" href="/admin/employees">Manage
                                        Employees</a></li>
                                <li><a class="sidebar-link waves-effect waves-dark" href="/admin/managers">Manage
                                        Managers</a></li>
                            </ul>
                        </li>

                    </ul>
                </nav>
            </div>
        </aside>